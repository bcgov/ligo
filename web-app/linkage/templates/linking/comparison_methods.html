{% load linking_extras %}
<div class="row">
    <label for="link_comp_{{ form_index }}_{{ forloop.counter0 }}" class="control-label col-sm-2">Comparison
        Method</label>
    <div class="col-sm-10">
        <div class="preview input-group">
            <select id="link_comp_{{ form_index }}_{{ forloop.counter0 }}" class="alg form-control"
                    name="link_comp_{{ form_index }}_{{ forloop.counter0 }}">
                <option value=""></option>
                {% for item in linking_comparison_choices|get_item:form.linking_method.value %}
                    <option value="{{ item.0 }}" {% if alg.name == item.0 %}
                            selected="selected" {% endif %}>{{ item.1 }}</option>
                {% endfor %}
            </select>
            <div class="input-group-btn">
                <button type="button" class="linking-var-remove btn btn-danger">
                    <i class="glyphicon glyphicon-remove"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="alg-arg">
        {% with args_list=comparison_args|get_item:form.linking_method.value|get_item:alg.name var_index=forloop.counter0 %}
            {% if args_list %}
                {% for arg_name in alg.args %}
                    <label for="link_comp_arg_{{ form_index }}_{{ var_index }}_{{ forloop.counter0 }}"
                           class="control-label col-sm-2">{{ arg_name }}</label>
                    <div class="preview col-sm-4">
                        <input id="link_comp_arg_{{ form_index }}_{{ var_index }}_{{ forloop.counter0 }}"
                               type="text" class="form-control"
                               value="{{ alg.args|get_item:arg_name}}">
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
</div>
